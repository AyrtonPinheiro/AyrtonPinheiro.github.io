<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.17">
<meta name="author" content="Ayrton Pinheiro de Araújo Silva &lt;ayrton1014@gmail.com&gt;">
<title>Processamento Digital de Imagens</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/*! Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment the following line when using as a custom stylesheet */
/* @import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700"; */
html{font-family:sans-serif;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
b,strong{font-weight:bold}
abbr{font-size:.9em}
abbr[title]{cursor:help;border-bottom:1px dotted #dddddf;text-decoration:none}
dfn{font-style:italic}
hr{height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type=checkbox],input[type=radio]{padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,::before,::after{box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;line-height:1;position:relative;cursor:auto;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:1px solid #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 0 rgba(0,0,0,.2),inset 0 0 0 .1em #fff;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin:0 auto;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:flex;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:hsla(0,0%,100%,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details{margin-left:1.25rem}
details>summary{cursor:pointer;display:block;position:relative;line-height:1.6;margin-bottom:.625rem;outline:none;-webkit-tap-highlight-color:transparent}
details>summary::-webkit-details-marker{display:none}
details>summary::before{content:"";border:solid transparent;border-left:solid;border-width:.3em 0 .3em .5em;position:absolute;top:.5em;left:-1.25rem;transform:translateX(15%)}
details[open]>summary::before{border:solid transparent;border-top:solid;border-width:.5em .3em 0;transform:translateY(15%)}
details>summary::after{content:"";width:1.25rem;height:1em;position:absolute;top:.3em;left:-1.25rem}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class=paragraph]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border:1px solid #e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border:1px solid #dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class=highlight],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos,pre.pygments .linenos{border-right:1px solid;opacity:.35;padding-right:.5em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}
pre.pygments span.linenos{display:inline-block;margin-right:.75em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans-serif;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all>*>tr,table.stripes-odd>*>tr:nth-of-type(odd),table.stripes-even>*>tr:nth-of-type(even),table.stripes-hover>*>tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
li>p:empty:only-child::before{content:"";display:inline-block}
ul.checklist>li>p:first-child{margin-left:-1em}
ul.checklist>li>p:first-child>.fa-square-o:first-child,ul.checklist>li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist>li>p:first-child>input[type=checkbox]:first-child{margin-right:.25em}
ul.inline{display:flex;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:4px solid #fff;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt,summary{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt,summary{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]{border-bottom:1px dotted}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media amzn-kf8,print{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<style>
pre.rouge table td { padding: 5px; }
pre.rouge table pre { margin: 0; }
pre.rouge, pre.rouge .w {
  color: #fbf1c7;
  background-color: #282828;
}
pre.rouge .err {
  color: #fb4934;
  background-color: #282828;
  font-weight: bold;
}
pre.rouge .c, pre.rouge .ch, pre.rouge .cd, pre.rouge .cm, pre.rouge .cpf, pre.rouge .c1, pre.rouge .cs {
  color: #928374;
  font-style: italic;
}
pre.rouge .cp {
  color: #8ec07c;
}
pre.rouge .nt {
  color: #fb4934;
}
pre.rouge .o, pre.rouge .ow {
  color: #fbf1c7;
}
pre.rouge .p, pre.rouge .pi {
  color: #fbf1c7;
}
pre.rouge .gi {
  color: #b8bb26;
  background-color: #282828;
}
pre.rouge .gd {
  color: #fb4934;
  background-color: #282828;
}
pre.rouge .gh {
  color: #b8bb26;
  font-weight: bold;
}
pre.rouge .k, pre.rouge .kn, pre.rouge .kp, pre.rouge .kr, pre.rouge .kv {
  color: #fb4934;
}
pre.rouge .kc {
  color: #d3869b;
}
pre.rouge .kt {
  color: #fabd2f;
}
pre.rouge .kd {
  color: #fe8019;
}
pre.rouge .s, pre.rouge .sb, pre.rouge .sc, pre.rouge .dl, pre.rouge .sd, pre.rouge .s2, pre.rouge .sh, pre.rouge .sx, pre.rouge .s1 {
  color: #b8bb26;
  font-style: italic;
}
pre.rouge .si {
  color: #b8bb26;
  font-style: italic;
}
pre.rouge .sr {
  color: #b8bb26;
  font-style: italic;
}
pre.rouge .sa {
  color: #fb4934;
}
pre.rouge .se {
  color: #fe8019;
}
pre.rouge .nn {
  color: #8ec07c;
}
pre.rouge .nc {
  color: #8ec07c;
}
pre.rouge .no {
  color: #d3869b;
}
pre.rouge .na {
  color: #b8bb26;
}
pre.rouge .m, pre.rouge .mb, pre.rouge .mf, pre.rouge .mh, pre.rouge .mi, pre.rouge .il, pre.rouge .mo, pre.rouge .mx {
  color: #d3869b;
}
pre.rouge .ss {
  color: #83a598;
}
</style>
</head>
<body class="article toc2 toc-left">
<div id="header">
<h1>Processamento Digital de Imagens</h1>
<div class="details">
<span id="author" class="author">Ayrton Pinheiro de Araújo Silva &lt;ayrton1014@gmail.com&gt;</span><br>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Sumário</div>
<ul class="sectlevel1">
<li><a href="#_1_introdução">1. Introdução</a></li>
<li><a href="#_2_manipulando_pixels_em_uma_imagem">2. Manipulando pixels em uma imagem</a>
<ul class="sectlevel2">
<li><a href="#_2_1_aplicar_região_negativa">2.1. Aplicar região negativa</a></li>
<li><a href="#_2_2_trocar_os_quadrantes_em_diagonal_na_imagem">2.2. Trocar os quadrantes em diagonal na imagem</a></li>
</ul>
</li>
<li><a href="#_3_preenchendo_regiões">3. Preenchendo regiões</a>
<ul class="sectlevel2">
<li><a href="#_3_1_rotular_mais_de_255_objetos">3.1. Rotular mais de 255 objetos</a></li>
<li><a href="#_3_2_identificar_objetos_com_ou_sem_buracos_internos">3.2. Identificar objetos com ou sem buracos internos</a></li>
</ul>
</li>
<li><a href="#_4_manipulação_de_histogramas">4. Manipulação de histogramas</a>
<ul class="sectlevel2">
<li><a href="#_4_1_equalizar_histograma">4.1. Equalizar histograma</a></li>
<li><a href="#_4_2_detectar_movimento">4.2. Detectar movimento</a></li>
</ul>
</li>
<li><a href="#_5_filtragem_no_domínio_espacial_i">5. Filtragem no domínio espacial I</a>
<ul class="sectlevel2">
<li><a href="#_5_1_calcular_o_laplaciano_do_gaussiano_das_imagens">5.1. Calcular o laplaciano do gaussiano das imagens</a></li>
</ul>
</li>
<li><a href="#_6_filtragem_no_domínio_espacial_ii">6. Filtragem no domínio espacial II</a>
<ul class="sectlevel2">
<li><a href="#_6_1_aplicar_tilt_shift_numa_imagem">6.1. Aplicar tilt-shift numa imagem</a></li>
</ul>
</li>
<li><a href="#_7_filtragem_no_domínio_da_frequência">7. Filtragem no domínio da frequência</a>
<ul class="sectlevel2">
<li><a href="#_7_1_implementar_um_filtro_homomórfico">7.1. Implementar um filtro homomórfico</a></li>
</ul>
</li>
<li><a href="#_8_detecção_de_bordas_com_o_algoritmo_de_canny">8. Detecção de bordas com o algoritmo de Canny</a>
<ul class="sectlevel2">
<li><a href="#_8_1_criar_técnica_pontilhista_com_uso_do_algoritmo_de_canny">8.1. Criar técnica pontilhista com uso do algoritmo de Canny</a></li>
</ul>
</li>
<li><a href="#_9_quantização_vetorial_com_k_means">9. Quantização vetorial com k-means</a>
<ul class="sectlevel2">
<li><a href="#_9_1_executar_o_programa_do_professor_com_novos_parâmetros">9.1. Executar o programa do professor com novos parâmetros</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="_1_introdução">1. Introdução</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Esta página é destinada a postagem da resolução dos exercícios da disciplina de Processamento Digital de Imagens do Departamento de Engenharia
de Computação e Automação da UFRN ministrada pelo professor Agostinho Brito Jr. no semestre de 2022.1.</p>
</div>
<div class="paragraph">
<p>Os exercícios podem ser encontrados na <a href="https://agostinhobritojr.github.io/tutorial/pdi">página do professor</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_2_manipulando_pixels_em_uma_imagem">2. Manipulando pixels em uma imagem</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_2_1_aplicar_região_negativa">2.1. Aplicar região negativa</h3>
<div class="paragraph">
<p>O objetivo desse exercício é exibir o negativo de uma imagem dentro da região retangular selecionada pelo usuário através de 2 pontos que serão
os vértices desse retângulo. Para isso é solicitado que o usuário digite as coordenadas de dois pontos e, então, o negativo é calculado através do
complemento do tom de cinza de cada pixel da região selecionada (complemento = 255 - tom de cinza do pixel), como pode ser visto no código abaixo:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="cpp"><span class="n">image</span><span class="p">.</span><span class="n">at</span><span class="o">&lt;</span><span class="n">uchar</span><span class="o">&gt;</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">)</span><span class="o">=</span><span class="mi">255</span> <span class="o">-</span> <span class="n">image</span><span class="p">.</span><span class="n">at</span><span class="o">&lt;</span><span class="n">uchar</span><span class="o">&gt;</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Isso foi feito para todos os pixels da região retangular delimitada pelos vértices (50,50) e (350,350) da <a href="index.html#gato_exercicio2">Figura 1</a>,
e o resultado pode ser visto na <a href="index.html#gato_saida_exercicio2">Figura 2</a>. O código completo se encontra em <a href="exercicio2/regions.cpp">regions.cpp</a>.</p>
</div>
<div id="gato_exercicio2" class="imageblock">
<div class="content">
<img src="exercicio2/gato.jpg" alt="gato">
</div>
<div class="title">Figure 1. Imagem de entrada</div>
</div>
<div id="gato_saida_exercicio2" class="imageblock">
<div class="content">
<img src="exercicio2/gato_saida.jpg" alt="gato saida">
</div>
<div class="title">Figure 2. Imagem de saída</div>
</div>
</div>
<div class="sect2">
<h3 id="_2_2_trocar_os_quadrantes_em_diagonal_na_imagem">2.2. Trocar os quadrantes em diagonal na imagem</h3>
<div class="paragraph">
<p>Neste exercício, o objetivo é trocar os quadrantes em diagonal de uma imagem. Para isso, foi criada uma nova variável <code>novaImagem</code> do tipo
<code>Mat</code> com as mesmas dimensões da imagem de entrada:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="cpp"><span class="kt">int</span> <span class="n">altura</span> <span class="o">=</span> <span class="n">image</span><span class="p">.</span><span class="n">size</span><span class="p">().</span><span class="n">height</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">largura</span> <span class="o">=</span> <span class="n">image</span><span class="p">.</span><span class="n">size</span><span class="p">().</span><span class="n">width</span><span class="p">;</span>
<span class="n">cv</span><span class="o">::</span><span class="n">Mat</span> <span class="nf">novaImagem</span><span class="p">(</span><span class="n">altura</span><span class="p">,</span> <span class="n">largura</span><span class="p">,</span> <span class="n">cv</span><span class="o">::</span><span class="n">IMREAD_GRAYSCALE</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>E em seguida foi feita a troca de quadrantes da imagem de entrada na <code>novaImagem</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="cpp">  <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="n">i</span><span class="o">&lt;</span><span class="n">altura</span><span class="o">/</span><span class="mi">2</span><span class="p">;</span><span class="n">i</span><span class="o">++</span><span class="p">){</span>
    <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">j</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="n">j</span><span class="o">&lt;</span><span class="n">largura</span><span class="o">/</span><span class="mi">2</span><span class="p">;</span><span class="n">j</span><span class="o">++</span><span class="p">){</span>
      <span class="n">novaImagem</span><span class="p">.</span><span class="n">at</span><span class="o">&lt;</span><span class="n">uchar</span><span class="o">&gt;</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">)</span> <span class="o">=</span> <span class="n">image</span><span class="p">.</span><span class="n">at</span><span class="o">&lt;</span><span class="n">uchar</span><span class="o">&gt;</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="n">altura</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span><span class="n">j</span><span class="o">+</span><span class="n">largura</span><span class="o">/</span><span class="mi">2</span><span class="p">);</span>
      <span class="n">novaImagem</span><span class="p">.</span><span class="n">at</span><span class="o">&lt;</span><span class="n">uchar</span><span class="o">&gt;</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="n">altura</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span><span class="n">j</span><span class="o">+</span><span class="n">largura</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span> <span class="o">=</span> <span class="n">image</span><span class="p">.</span><span class="n">at</span><span class="o">&lt;</span><span class="n">uchar</span><span class="o">&gt;</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">);</span>
      <span class="n">novaImagem</span><span class="p">.</span><span class="n">at</span><span class="o">&lt;</span><span class="n">uchar</span><span class="o">&gt;</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="n">altura</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span><span class="n">j</span><span class="p">)</span> <span class="o">=</span> <span class="n">image</span><span class="p">.</span><span class="n">at</span><span class="o">&lt;</span><span class="n">uchar</span><span class="o">&gt;</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="o">+</span><span class="n">largura</span><span class="o">/</span><span class="mi">2</span><span class="p">);</span>
      <span class="n">novaImagem</span><span class="p">.</span><span class="n">at</span><span class="o">&lt;</span><span class="n">uchar</span><span class="o">&gt;</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="o">+</span><span class="n">largura</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span> <span class="o">=</span> <span class="n">image</span><span class="p">.</span><span class="n">at</span><span class="o">&lt;</span><span class="n">uchar</span><span class="o">&gt;</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="n">altura</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span><span class="n">j</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>A imagem de entrada foi novamente a <a href="index.html#gato_exercicio2">Figura 1</a>, e o resultado pode ser visto na
<a href="index.html#gato_saida2_exercicio2">Figura 3</a>. O código completo se encontra em <a href="exercicio2/trocaregioes.cpp">trocaregioes.cpp</a>.</p>
</div>
<div id="gato_saida2_exercicio2" class="imageblock">
<div class="content">
<img src="exercicio2/gato_saida2.jpg" alt="gato saida2">
</div>
<div class="title">Figure 3. Imagem de saída</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_3_preenchendo_regiões">3. Preenchendo regiões</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_3_1_rotular_mais_de_255_objetos">3.1. Rotular mais de 255 objetos</h3>
<div class="paragraph">
<p>No código do professor (<a href="https://agostinhobritojr.github.io/tutorial/pdi/exemplos/labeling.cpp">labeling.cpp</a>), a cor de cada objeto encontrado é modificada
para um novo tom de cinza correspondente ao seu número de contagem. Mas, como nos computadores os valores de tom de cinza variam de 0 a 255,
no 256º objeto encontrado pelo código ocorreria um erro, pois seria utilizado um tom de cinza inexistente. Portanto, para o objetivo do código,
que é apenas contar a quantidade de bolhas da imagem, basta pintar todos os objetos com apenas uma cor, usando um valor constante no parâmetro
de cor da função <code>floodFill()</code> no lugar da variável de contagem <code>nobjects</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="cpp"><span class="n">cv</span><span class="o">::</span><span class="n">floodFill</span><span class="p">(</span><span class="n">image</span><span class="p">,</span><span class="n">p</span><span class="p">,</span><span class="mi">100</span><span class="p">);</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_3_2_identificar_objetos_com_ou_sem_buracos_internos">3.2. Identificar objetos com ou sem buracos internos</h3>
<div class="paragraph">
<p>O objetivo deste exercício é fazer a contagem de objetos com ou sem buracos internos, podendo existir mais de um buraco dentro de um objeto
e ignorando objetos que tocam nas bordas pois não se pode afirmar que eles tenham buracos ou não. O programa considera que na imagem de entrada
o tom de cinza igual a 0 é o fundo e o tom 255 é um objeto.</p>
</div>
<div class="paragraph">
<p>Então, para começar, foi feita a busca por objetos
que tocam nas bordas e, quando encontrado, seu valor de tom de cinza foi alterado para o mesmo valor do fundo da imagem a partir de um <code>floodFill()</code>.
Com o objetivo de encontrar os buracos, foi feito um <code>floodFill()</code> na coordenada (0, 0) da imagem, que modifica o tom de cinza do fundo para 70,
visto que essa função modifica todos os pontos interligados que tenham o mesmo tom, os pontos da imagem que continuem com valor 0 serão identificados
como buraco. O código dessa parte pode ser visto abaixo e o resultado está apresentado na <a href="index.html#bolhas2_exercicio3">Figura 5</a>,
tendo como entrada a <a href="index.html#bolhas_exercicio3">Figura 4</a>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="cpp">  <span class="c1">// busca objetos presentes nas bordas e os desconsidera</span>
  <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="n">height</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">){</span>
    <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">j</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="n">j</span><span class="o">&lt;</span><span class="n">width</span><span class="p">;</span> <span class="n">j</span><span class="o">++</span><span class="p">){</span>
      <span class="k">if</span><span class="p">(</span><span class="n">image</span><span class="p">.</span><span class="n">at</span><span class="o">&lt;</span><span class="n">uchar</span><span class="o">&gt;</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">)</span> <span class="o">==</span> <span class="mi">255</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="n">i</span> <span class="o">==</span> <span class="mi">0</span> <span class="o">||</span> <span class="n">j</span> <span class="o">==</span> <span class="mi">0</span> <span class="o">||</span> <span class="n">i</span> <span class="o">==</span> <span class="n">height</span><span class="o">-</span><span class="mi">1</span> <span class="o">||</span> <span class="n">j</span> <span class="o">==</span> <span class="n">width</span><span class="o">-</span><span class="mi">1</span><span class="p">)){</span>
        <span class="n">p</span><span class="p">.</span><span class="n">x</span><span class="o">=</span><span class="n">j</span><span class="p">;</span>
        <span class="n">p</span><span class="p">.</span><span class="n">y</span><span class="o">=</span><span class="n">i</span><span class="p">;</span>
      	<span class="n">cv</span><span class="o">::</span><span class="n">floodFill</span><span class="p">(</span><span class="n">image</span><span class="p">,</span><span class="n">p</span><span class="p">,</span><span class="mi">0</span><span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
  <span class="n">p</span><span class="p">.</span><span class="n">x</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>
  <span class="n">p</span><span class="p">.</span><span class="n">y</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>
  <span class="c1">// fundo preenchido com cor 70</span>
  <span class="n">cv</span><span class="o">::</span><span class="n">floodFill</span><span class="p">(</span><span class="n">image</span><span class="p">,</span><span class="n">p</span><span class="p">,</span><span class="mi">70</span><span class="p">);</span></code></pre>
</div>
</div>
<div id="bolhas_exercicio3" class="imageblock">
<div class="content">
<img src="exercicio3/bolhas.png" alt="bolhas">
</div>
<div class="title">Figure 4. Imagem de entrada</div>
</div>
<div id="bolhas2_exercicio3" class="imageblock">
<div class="content">
<img src="exercicio3/bolhas2.png" alt="bolhas2">
</div>
<div class="title">Figure 5. Imagem sem objeto nas bordas e com cor de fundo igual a 70</div>
</div>
<div class="paragraph">
<p>Em seguida, foi feita a busca por buracos através do tom de cinza igual a 0. Quando um tom de cinza igual a 0 é encontrado, é verificado se o pixel anterior
tem valor igual a 255 (que identifica um objeto). Sendo 255, um novo <code>floodFill()</code> é aplicado nesse pixel de valor 255, fazendo com que o objeto
mude para o tom 140 (cor escolhida para identificar objetos com buracos) e é icrementado 1 à variável de contagem de objetos com buracos. Dessa maneira,
ao encontrar um segundo buraco de um objeto, ele não será contado novamente, pois seu tom de cinza não é mais 255. O código dessa parte pode ser visto abaixo
e o resultado está apresentado na <a href="index.html#bolhas3_exercicio3">Figura 6</a>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="cpp">  <span class="c1">// busca objetos com buracos</span>
  <span class="cm">/* se a imagem tiver mais de 1 buraco, ao encontrar o segundo buraco 
  de um objeto que ja foi contado, a cor dele não será mais 255,
  logo ele não será contado mais de 1 vez */</span>
  <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="n">height</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">){</span>
    <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">j</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="n">j</span><span class="o">&lt;</span><span class="n">width</span><span class="p">;</span> <span class="n">j</span><span class="o">++</span><span class="p">){</span>
      <span class="k">if</span><span class="p">(</span><span class="n">image</span><span class="p">.</span><span class="n">at</span><span class="o">&lt;</span><span class="n">uchar</span><span class="o">&gt;</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="n">image</span><span class="p">.</span><span class="n">at</span><span class="o">&lt;</span><span class="n">uchar</span><span class="o">&gt;</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="o">==</span> <span class="mi">255</span><span class="p">){</span>
        <span class="n">nObjCom</span><span class="o">++</span><span class="p">;</span>
        <span class="n">p</span><span class="p">.</span><span class="n">x</span><span class="o">=</span><span class="n">j</span><span class="o">-</span><span class="mi">1</span><span class="p">;</span>
        <span class="n">p</span><span class="p">.</span><span class="n">y</span><span class="o">=</span><span class="n">i</span><span class="p">;</span>
        <span class="n">cv</span><span class="o">::</span><span class="n">floodFill</span><span class="p">(</span><span class="n">image</span><span class="p">,</span><span class="n">p</span><span class="p">,</span><span class="mi">140</span><span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span></code></pre>
</div>
</div>
<div id="bolhas3_exercicio3" class="imageblock">
<div class="content">
<img src="exercicio3/bolhas3.png" alt="bolhas3">
</div>
<div class="title">Figure 6. Imagem após contagem dos objetos com buracos</div>
</div>
<div class="paragraph">
<p>Por fim, para contar os objetos sem buraco, foi feito uma busca com pixels de valor 255 e aplicado um <code>floodFill()</code> com valor 210, e foi icrementado 1 à variável de
contagem de objetos sem buracos. O código pode ser visto abaixo e a <a href="index.html#bolhas4_exercicio3">Figura 7</a> apresenta a imagem final.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="cpp">  <span class="c1">// busca objetos sem buracos</span>
  <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="n">height</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">){</span>
    <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">j</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="n">j</span><span class="o">&lt;</span><span class="n">width</span><span class="p">;</span> <span class="n">j</span><span class="o">++</span><span class="p">){</span>
      <span class="k">if</span><span class="p">(</span><span class="n">image</span><span class="p">.</span><span class="n">at</span><span class="o">&lt;</span><span class="n">uchar</span><span class="o">&gt;</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">)</span> <span class="o">==</span> <span class="mi">255</span><span class="p">){</span>
        <span class="n">nObjSem</span><span class="o">++</span><span class="p">;</span>
        <span class="n">p</span><span class="p">.</span><span class="n">x</span><span class="o">=</span><span class="n">j</span><span class="p">;</span>
        <span class="n">p</span><span class="p">.</span><span class="n">y</span><span class="o">=</span><span class="n">i</span><span class="p">;</span>
        <span class="n">cv</span><span class="o">::</span><span class="n">floodFill</span><span class="p">(</span><span class="n">image</span><span class="p">,</span><span class="n">p</span><span class="p">,</span><span class="mi">210</span><span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span></code></pre>
</div>
</div>
<div id="bolhas4_exercicio3" class="imageblock">
<div class="content">
<img src="exercicio3/bolhas4.png" alt="bolhas4">
</div>
<div class="title">Figure 7. Imagem após contagem dos objetos sem buracos</div>
</div>
<div class="paragraph">
<p>A contagem dos objetos é apresentada no terminal, como pode ser vista na <a href="index.html#contagem_exercicio3">Figura 8</a>.
O código completo se encontra em <a href="exercicio3/novoLabeling.cpp">novoLabeling.cpp</a>.</p>
</div>
<div id="contagem_exercicio3" class="imageblock">
<div class="content">
<img src="exercicio3/contagem.png" alt="contagem">
</div>
<div class="title">Figure 8. Contagem dos objetos</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_4_manipulação_de_histogramas">4. Manipulação de histogramas</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_4_1_equalizar_histograma">4.1. Equalizar histograma</h3>
<div class="paragraph">
<p>O objetivo deste exercício é fazer a equalização do histograma dos frames do vídeo capturado através de uma webcam processados em tons de cinza,
apresentando o vídeo original e o equalizado. O processo de equalização consiste na transformação de intensidade que tem por objetivo balancear
os níveis de cinza em uma imagem. Dessa forma, imagens com um nível de brilho desbalanceado atingem uma
distribuição normalizada, buscando melhorar o contraste e a visualização dos detalhes presentes na cena.</p>
</div>
<div class="paragraph">
<p>Usando o código disponibilizado pelo professor (<a href="https://agostinhobritojr.github.io/tutorial/pdi/exemplos/histogram.cpp">histogram.cpp</a>) e fazendo
algumas modificações, como mudar a apresentação do vídeo de RGB para tons de cinza, o código <a href="exercicio4/equalize.cpp">equalize.cpp</a> foi desenvolvido.
O programa consiste em utilizar a função <code>equalizeHist()</code>, que faz o processo de equalização do frame <code>image</code> e coloca o resultado na variável <code>imageEq</code>.
Como pode ser visto no código abaixo:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="cpp"><span class="n">equalizeHist</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="n">imageEq</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>O resultado pode ser visto na <a href="index.html#equalize_exercicio4">Figura 9</a> (na esquerda a imagem de entrada e na direita a imagem equalizada, o histograma
de cada imagem está no canto superior esquerdo da mesma) e o código completo se encontra em <a href="exercicio4/equalize.cpp">equalize.cpp</a>.</p>
</div>
<div id="equalize_exercicio4" class="imageblock">
<div class="content">
<img src="exercicio4/equalize.png" alt="equalize">
</div>
<div class="title">Figure 9. Equalização</div>
</div>
</div>
<div class="sect2">
<h3 id="_4_2_detectar_movimento">4.2. Detectar movimento</h3>
<div class="paragraph">
<p>Usando o programa anterior como base, este exercício tem como objetivo a criação de um detector de movimento baseado na diferença entre o histograma
de um frame atual e o histograma do
frame anterior, utilizando um limiar pré-estabelecido que busca indicar se a diferença dos histogramas subsequentes representa um movimento. Para
calcular essa diferença o OpenCV tem a função <code>compareHist()</code> que recebe como parâmetros os 2 histogramas que serão comparados e um valor inteiro
que representa a equação que será utilizada
para a comparação (as equações podem ser vistas <a href="https://docs.opencv.org/3.4/d8/dc8/tutorial_histogram_comparison.html">aqui</a>), neste código foi
utilizada a equação <code>CV_COMP_CHISQR</code> e após alguns testes foi decidido que o limiar de 2,5 era o melhor.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="cpp"><span class="kt">double</span> <span class="n">compara</span> <span class="o">=</span> <span class="n">compareHist</span><span class="p">(</span><span class="n">histR</span><span class="p">,</span> <span class="n">histG</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span> <span class="c1">//1 = metodo CV_COMP_CHISQR</span>
<span class="c1">//2.5 foi aproximadamente o menor valor que não detecta ruído do histograma</span>
<span class="k">if</span> <span class="p">(</span><span class="n">compara</span> <span class="o">&gt;</span> <span class="mf">2.5</span><span class="p">)</span> <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"MOVIMENTO!!"</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>O código completo se encontra em <a href="exercicio4/motiondetector.cpp">motiondetector.cpp</a>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_5_filtragem_no_domínio_espacial_i">5. Filtragem no domínio espacial I</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_5_1_calcular_o_laplaciano_do_gaussiano_das_imagens">5.1. Calcular o laplaciano do gaussiano das imagens</h3>
<div class="paragraph">
<p>O objetivo deste exercício é adicionar uma nova funcionalidade ao código do professor
(<a href="https://agostinhobritojr.github.io/tutorial/pdi/exemplos/filtroespacial.cpp">filtroespacial.cpp</a>), esta funcionalidade faz o cálculo do laplaciano do gaussiano
dos frames do vídeo capturado por uma webcam. Este código apenas adiciona a nova máscara e acrescenta uma nova função ao menu,
que podem ser vistas abaixo:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="cpp">  <span class="kt">float</span> <span class="n">laplgauss</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
                       <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
                       <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">};</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="cpp">      <span class="k">case</span> <span class="sc">'x'</span><span class="p">:</span>
        <span class="n">menu</span><span class="p">();</span>
        <span class="n">mask</span> <span class="o">=</span> <span class="n">cv</span><span class="o">::</span><span class="n">Mat</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="n">CV_32F</span><span class="p">,</span> <span class="n">laplgauss</span><span class="p">);</span>
        <span class="k">break</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Ao aplicar o filtro gaussiano antes do laplaciano procura-se diminuir os ruídos, visto que o gaussiano aplica um borramento no frame, resultando
numa melhora na detecção de bordas feita pelo filtro laplaciano. A imagem filtrada pode ser vista na <a href="index.html#laplgauss_exercicio5">Figura 10</a>.</p>
</div>
<div id="laplgauss_exercicio5" class="imageblock">
<div class="content">
<img src="exercicio5/laplgauss.png" alt="laplgauss">
</div>
<div class="title">Figure 10. Filtro laplaciano do gaussiano</div>
</div>
<div class="paragraph">
<p>Para efeito de comparação, a <a href="index.html#laplaciano_exercicio5">Figura 11</a> mostra o resultado do filtro laplaciano.</p>
</div>
<div id="laplaciano_exercicio5" class="imageblock">
<div class="content">
<img src="exercicio5/laplaciano.png" alt="laplaciano">
</div>
<div class="title">Figure 11. Filtro laplaciano</div>
</div>
<div class="paragraph">
<p>O código completo se encontra em <a href="exercicio5/laplgauss.cpp">laplgauss.cpp</a>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_6_filtragem_no_domínio_espacial_ii">6. Filtragem no domínio espacial II</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_6_1_aplicar_tilt_shift_numa_imagem">6.1. Aplicar tilt-shift numa imagem</h3>
<div class="paragraph">
<p>Utilizando como referência o programa disponibilizado pelo professor (<a href="https://agostinhobritojr.github.io/tutorial/pdi/exemplos/addweighted.cpp">addweighted.cpp</a>),
o objetivo desse exercício foi desenvolver um programa que permita fazer 3 tipos de ajustes através de trackbars numa imagem de entrada.
O primeiro ajuste regula a altura da região central que fica em foco, o segundo ajusta o decaimento da região borrada e o terceiro ajusta a posição
vertical da região em foco. Esses três ajustes buscam aplicar na imagem a técnica de tilt-shift, fazendo com que lugares, objetos e pessoas
reais se pareçam com miniaturas e maquetes.</p>
</div>
<div class="paragraph">
<p>A função que define a região de desfoque ao longo do eixo vertical da imagem é dada por:</p>
</div>
<div class="paragraph">
<p>\(\alpha(x) = \dfrac{1}{2} \left(tanh \left(\dfrac{x-l1}{d} \right) - tanh \left(\dfrac{x-l2}{d} \right) \right)\)</p>
</div>
<div class="paragraph">
<p>Onde \(d\) é o decaimento e \(l1\) e \(l2\) são as linhas cujo valor de \(\alpha\) assume valor em torno de 0.5. No programa, \(d\)
recebe o valor direto da trackbar do decaimento, enquanto \(l1\) e \(l2\) são obtidas através das duas outras trackbars por meio de:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="cpp"><span class="n">l1</span> <span class="o">=</span> <span class="n">image1</span><span class="p">.</span><span class="n">size</span><span class="p">().</span><span class="n">height</span><span class="o">*</span><span class="p">(</span><span class="n">centro_slider</span> <span class="o">-</span> <span class="n">top_slider</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span><span class="o">/</span><span class="mf">100.0</span><span class="p">;</span>
<span class="n">l2</span> <span class="o">=</span> <span class="n">image1</span><span class="p">.</span><span class="n">size</span><span class="p">().</span><span class="n">height</span><span class="o">*</span><span class="p">(</span><span class="n">centro_slider</span> <span class="o">+</span> <span class="n">top_slider</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span><span class="o">/</span><span class="mf">100.0</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><code>centro_slider</code> é a posição vertical do centro da região em foco e <code>top_slider</code> é a altura.</p>
</div>
<div class="paragraph">
<p>Então, o programa começa recebendo uma imagem e fazendo uma cópia dela. Esta cópia passa por um processo de borramento através de um filtro de média,
que é aplicado dez vezes para reforçar o efeito de borramento.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="cpp">  <span class="n">image1</span> <span class="o">=</span> <span class="n">cv</span><span class="o">::</span><span class="n">imread</span><span class="p">(</span><span class="s">"Pedestres.jpg"</span><span class="p">);</span> 
  <span class="n">resize</span><span class="p">(</span><span class="n">image1</span><span class="p">,</span> <span class="n">image1</span><span class="p">,</span> <span class="n">cv</span><span class="o">::</span><span class="n">Size</span><span class="p">(</span><span class="mi">750</span><span class="p">,</span><span class="mi">500</span><span class="p">));</span>
  <span class="n">image1</span><span class="p">.</span><span class="n">copyTo</span><span class="p">(</span><span class="n">image2</span><span class="p">);</span>  <span class="c1">//image2 é uma copia de image1 que vai passar por um borramento</span>
  <span class="kt">float</span> <span class="n">media</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span><span class="mf">0.1111</span><span class="p">,</span> <span class="mf">0.1111</span><span class="p">,</span> <span class="mf">0.1111</span><span class="p">,</span> <span class="mf">0.1111</span><span class="p">,</span> <span class="mf">0.1111</span><span class="p">,</span>
                   <span class="mf">0.1111</span><span class="p">,</span> <span class="mf">0.1111</span><span class="p">,</span> <span class="mf">0.1111</span><span class="p">,</span> <span class="mf">0.1111</span><span class="p">};</span>
  
  <span class="n">image2</span><span class="p">.</span><span class="n">convertTo</span><span class="p">(</span><span class="n">image2</span><span class="p">,</span> <span class="n">CV_32F</span><span class="p">);</span>
  <span class="n">mask</span> <span class="o">=</span> <span class="n">cv</span><span class="o">::</span><span class="n">Mat</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">CV_32F</span><span class="p">,</span> <span class="n">media</span><span class="p">);</span>  
  <span class="c1">//aplicando o filtro 10 vezes para reforçar o borramento</span>
  <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="n">i</span><span class="o">&lt;</span><span class="mi">10</span><span class="p">;</span><span class="n">i</span><span class="o">++</span><span class="p">){</span>
    <span class="n">cv</span><span class="o">::</span><span class="n">filter2D</span><span class="p">(</span><span class="n">image2</span><span class="p">,</span> <span class="n">image2</span><span class="p">,</span> <span class="n">image2</span><span class="p">.</span><span class="n">depth</span><span class="p">(),</span> <span class="n">mask</span><span class="p">,</span>
                 <span class="n">cv</span><span class="o">::</span><span class="n">Point</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="mi">0</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="n">image2</span><span class="p">.</span><span class="n">convertTo</span><span class="p">(</span><span class="n">image2</span><span class="p">,</span> <span class="n">CV_8U</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Agora, o efeito de tilt-shift é aplicado ao ponderarmos a imagem original com a função \(\alpha(x)\) e a cópia borrada com \(1 - \alpha(x)\).
Isso é feito linha por linha da imagem usando a função <code>addWeighted()</code> do OpenCV e o resultado é aplicado na variável <code>blended</code>, que tem as mesmas
dimensões da imagem de entrada:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="cpp">  <span class="c1">//ponderação entre a imagem original com o alfa e a imagem borrada com o negativo de alfa</span>
  <span class="c1">//e a combinação delas, resultando no efeito tiltshift</span>
  <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="n">i</span><span class="o">&lt;</span><span class="n">image1</span><span class="p">.</span><span class="n">size</span><span class="p">().</span><span class="n">height</span><span class="p">;</span><span class="n">i</span><span class="o">++</span><span class="p">){</span>
    <span class="n">alfa</span> <span class="o">=</span> <span class="mf">0.5</span><span class="o">*</span><span class="p">(</span><span class="n">tanh</span><span class="p">((</span><span class="n">i</span><span class="o">-</span><span class="n">l1</span><span class="p">)</span><span class="o">/</span><span class="p">(</span><span class="kt">double</span><span class="p">)(</span><span class="n">dec_slider</span><span class="o">+</span><span class="mf">1.0</span><span class="p">))</span><span class="o">-</span><span class="n">tanh</span><span class="p">((</span><span class="n">i</span><span class="o">-</span><span class="n">l2</span><span class="p">)</span><span class="o">/</span><span class="p">(</span><span class="kt">double</span><span class="p">)(</span><span class="n">dec_slider</span><span class="o">+</span><span class="mf">1.0</span><span class="p">)));</span>
    <span class="n">cv</span><span class="o">::</span><span class="n">addWeighted</span><span class="p">(</span><span class="n">image1</span><span class="p">.</span><span class="n">row</span><span class="p">(</span><span class="n">i</span><span class="p">),</span> <span class="n">alfa</span><span class="p">,</span> <span class="n">image2</span><span class="p">.</span><span class="n">row</span><span class="p">(</span><span class="n">i</span><span class="p">),</span> <span class="mi">1</span><span class="o">-</span><span class="n">alfa</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="n">blended</span><span class="p">.</span><span class="n">row</span><span class="p">(</span><span class="n">i</span><span class="p">));</span>
  <span class="p">}</span> 
  <span class="n">cv</span><span class="o">::</span><span class="n">imshow</span><span class="p">(</span><span class="s">"tiltshift"</span><span class="p">,</span> <span class="n">blended</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Como imagem de entrada, foi usada a <a href="index.html#pedestres_exercicio6">Figura 12</a>. E como resultado, foi obtida a
<a href="index.html#pedestres_tiltshift_exercicio6">Figura 13</a></p>
</div>
<div id="pedestres_exercicio6" class="imageblock">
<div class="content">
<img src="exercicio6/Pedestres.jpg" alt="Pedestres" width="750" height="500">
</div>
<div class="title">Figure 12. Imagem de entrada</div>
</div>
<div id="pedestres_tiltshift_exercicio6" class="imageblock">
<div class="content">
<img src="exercicio6/pedestres_tiltshift.png" alt="pedestres tiltshift">
</div>
<div class="title">Figure 13. Imagem de saída</div>
</div>
<div class="paragraph">
<p>O código completo se encontra em <a href="exercicio6/tiltshift.cpp">tiltshift.cpp</a>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_7_filtragem_no_domínio_da_frequência">7. Filtragem no domínio da frequência</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_7_1_implementar_um_filtro_homomórfico">7.1. Implementar um filtro homomórfico</h3>
<div class="paragraph">
<p>O objetivo deste exercício é aplicar um filtro homomórfico em uma imagem buscando melhorar sua iluminação. Esse filtro é aplicado no domínio
da frequência e é representado pela expressão a seguir e seu gráfico pode ser visto na <a href="index.html#grafico_homomorfico_exercicio7">Figura 14</a>.</p>
</div>
<div class="paragraph">
<p>\( H(u,v) = (\gamma_H - \gamma_L)\left(1 - e^{-c \frac{D^2(u,v)}{D_0^2}} \right) - \gamma_L \)</p>
</div>
<div id="grafico_homomorfico_exercicio7" class="imageblock">
<div class="content">
<img src="exercicio7/grafico_homomorfico.png" alt="grafico homomorfico" width="476" height="248">
</div>
<div class="title">Figure 14. Gráfico do filtro homomórfico</div>
</div>
<div class="paragraph">
<p>Onde \(\gamma_H\), \(\gamma_L\), \(D_0\) e \(c\) variam através de trackbars implementadas no código e \(D^2(u,v)\) é obtido através de:</p>
</div>
<div class="paragraph">
<p>\( D^2(u,v) = \left(u - \frac{M}{2}\right)^2 + \left(v - \frac{N}{2} \right)^2 \)</p>
</div>
<div class="paragraph">
<p>O programa disponibilizado pelo professor (<a href="https://agostinhobritojr.github.io/tutorial/pdi/exemplos/dft.cpp">dft.cpp</a>) foi usado como referência e
a equação do filtro foi adicionada na função <code>on_trackbar_efeito(int, void*)</code> que pode ser vista abaixo.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="cpp"><span class="kt">void</span> <span class="nf">on_trackbar_efeito</span><span class="p">(</span><span class="kt">int</span><span class="p">,</span> <span class="kt">void</span><span class="o">*</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">filter</span> <span class="o">=</span> <span class="n">cv</span><span class="o">::</span><span class="n">Mat</span><span class="p">(</span><span class="n">padded</span><span class="p">.</span><span class="n">size</span><span class="p">(),</span> <span class="n">CV_32FC2</span><span class="p">,</span> <span class="n">cv</span><span class="o">::</span><span class="n">Scalar</span><span class="p">(</span><span class="mi">0</span><span class="p">));</span>
  <span class="n">tmp</span> <span class="o">=</span> <span class="n">cv</span><span class="o">::</span><span class="n">Mat</span><span class="p">(</span><span class="n">dft_M</span><span class="p">,</span> <span class="n">dft_N</span><span class="p">,</span> <span class="n">CV_32F</span><span class="p">);</span>
  <span class="kt">float</span> <span class="n">c0</span><span class="p">,</span> <span class="n">d0</span><span class="p">,</span> <span class="n">gammaH</span><span class="p">,</span> <span class="n">gammaL</span><span class="p">,</span> <span class="n">dQuad</span><span class="p">;</span>
  <span class="n">c0</span> <span class="o">=</span> <span class="p">(</span><span class="kt">float</span><span class="p">)</span><span class="n">c_slider</span><span class="o">/</span><span class="mf">10.0</span><span class="p">;</span>
  <span class="n">d0</span> <span class="o">=</span> <span class="p">(</span><span class="kt">float</span><span class="p">)</span><span class="n">d0_slider</span><span class="o">/</span><span class="mf">10.0</span><span class="p">;</span>
  <span class="n">gammaH</span> <span class="o">=</span> <span class="p">(</span><span class="kt">float</span><span class="p">)</span><span class="n">gammaH_slider</span><span class="o">/</span><span class="mf">10.0</span><span class="p">;</span>
  <span class="n">gammaL</span> <span class="o">=</span> <span class="p">(</span><span class="kt">float</span><span class="p">)</span><span class="n">gammaL_slider</span><span class="o">/</span><span class="mf">10.0</span><span class="p">;</span>
  <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="n">i</span><span class="o">&lt;</span><span class="n">dft_M</span><span class="p">;</span><span class="n">i</span><span class="o">++</span><span class="p">){</span>
    <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">j</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="n">j</span><span class="o">&lt;</span><span class="n">dft_N</span><span class="p">;</span><span class="n">j</span><span class="o">++</span><span class="p">){</span>
      <span class="n">dQuad</span> <span class="o">=</span> <span class="n">pow</span><span class="p">((</span><span class="kt">float</span><span class="p">)</span><span class="n">i</span> <span class="o">-</span> <span class="n">dft_M</span><span class="o">/</span><span class="mf">2.0</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="n">pow</span><span class="p">((</span><span class="kt">float</span><span class="p">)</span><span class="n">j</span> <span class="o">-</span> <span class="n">dft_N</span><span class="o">/</span><span class="mf">2.0</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
      <span class="n">tmp</span><span class="p">.</span><span class="n">at</span><span class="o">&lt;</span><span class="kt">float</span><span class="o">&gt;</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">)</span> <span class="o">=</span> <span class="p">(</span><span class="n">gammaH</span> <span class="o">-</span> <span class="n">gammaL</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="n">exp</span><span class="p">(</span><span class="o">-</span><span class="mf">1.0</span><span class="o">*</span><span class="p">(</span><span class="n">c0</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="n">dQuad</span><span class="o">/</span><span class="p">(</span><span class="n">d0</span><span class="o">*</span><span class="n">d0</span><span class="p">))))</span> <span class="o">+</span> <span class="n">gammaL</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}</span>
  
  <span class="c1">// cria a matriz com as componentes do filtro e junta</span>
  <span class="c1">// ambas em uma matriz multicanal complexa</span>
  <span class="n">cv</span><span class="o">::</span><span class="n">Mat</span> <span class="n">comps</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span><span class="n">tmp</span><span class="p">,</span> <span class="n">tmp</span><span class="p">};</span>
  <span class="n">cv</span><span class="o">::</span><span class="n">merge</span><span class="p">(</span><span class="n">comps</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">filter</span><span class="p">);</span>
  
  <span class="n">cv</span><span class="o">::</span><span class="n">Mat</span> <span class="n">cloneComplexImage</span> <span class="o">=</span> <span class="n">complexImage</span><span class="p">.</span><span class="n">clone</span><span class="p">();</span>
  
  <span class="c1">// aplica o filtro de frequencia</span>
  <span class="n">cv</span><span class="o">::</span><span class="n">mulSpectrums</span><span class="p">(</span><span class="n">cloneComplexImage</span><span class="p">,</span> <span class="n">filter</span><span class="p">,</span> <span class="n">cloneComplexImage</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
  
  <span class="c1">// troca novamente os quadrantes</span>
  <span class="n">deslocaDFT</span><span class="p">(</span><span class="n">cloneComplexImage</span><span class="p">);</span>

  <span class="c1">// calcula a DFT inversa</span>
  <span class="n">cv</span><span class="o">::</span><span class="n">idft</span><span class="p">(</span><span class="n">cloneComplexImage</span><span class="p">,</span> <span class="n">cloneComplexImage</span><span class="p">);</span>

  <span class="c1">// limpa o array de planos</span>
  <span class="n">planos</span><span class="p">.</span><span class="n">clear</span><span class="p">();</span>

  <span class="c1">// separa as partes real e imaginaria da</span>
  <span class="c1">// imagem filtrada</span>
  <span class="n">cv</span><span class="o">::</span><span class="n">split</span><span class="p">(</span><span class="n">cloneComplexImage</span><span class="p">,</span> <span class="n">planos</span><span class="p">);</span>

  <span class="c1">// normaliza a parte real para exibicao</span>
  <span class="n">cv</span><span class="o">::</span><span class="n">normalize</span><span class="p">(</span><span class="n">planos</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">planos</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">cv</span><span class="o">::</span><span class="n">NORM_MINMAX</span><span class="p">);</span>
  <span class="n">cv</span><span class="o">::</span><span class="n">imshow</span><span class="p">(</span><span class="s">"filtroHomomorfico"</span><span class="p">,</span> <span class="n">planos</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>    
<span class="p">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>A <a href="index.html#texto_exercicio7">Figura 15</a> foi usada como entrada e o resultado pode ser visto na <a href="index.html#textoFiltrado_exercicio7">Figura 16</a></p>
</div>
<div id="texto_exercicio7" class="imageblock">
<div class="content">
<img src="exercicio7/texto.jpg" alt="texto" width="800" height="600">
</div>
<div class="title">Figure 15. Imagem de entrada</div>
</div>
<div id="textoFiltrado_exercicio7" class="imageblock">
<div class="content">
<img src="exercicio7/textoFiltrado.png" alt="textoFiltrado">
</div>
<div class="title">Figure 16. Imagem de saída</div>
</div>
<div class="paragraph">
<p>O código completo se encontra em <a href="exercicio7/filtro_homomorfico.cpp">filtro_homomorfico.cpp</a>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_8_detecção_de_bordas_com_o_algoritmo_de_canny">8. Detecção de bordas com o algoritmo de Canny</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_8_1_criar_técnica_pontilhista_com_uso_do_algoritmo_de_canny">8.1. Criar técnica pontilhista com uso do algoritmo de Canny</h3>
<div class="paragraph">
<p>Utilizando os programas <a href="https://agostinhobritojr.github.io/tutorial/pdi/exemplos/canny.cpp">canny.cpp</a> e
<a href="https://agostinhobritojr.github.io/tutorial/pdi/exemplos/pontilhismo.cpp">pontilhismo.cpp</a> como referência, foi implementado um programa que
recebe uma imagem de entrada e gera uma imagem pontilhista a partir dela seguido da utilização do algoritmo de Canny para melhorar a qualidade da imagem
pontilhista. A imagem original em cinza pode ser vista na <a href="index.html#imagemOriginalCinza_exercicio8">Figura 17</a>.</p>
</div>
<div id="imagemOriginalCinza_exercicio8" class="imageblock">
<div class="content">
<img src="exercicio8/originalCinza.jpg" alt="originalCinza">
</div>
<div class="title">Figure 17. Imagem de entrada em cinza</div>
</div>
<div class="paragraph">
<p>Após aplicar o pontilhismo na imagem, foi adicionado o código a seguir para remover as espaços brancos entre os cículos, resultando na
<a href="index.html#Pontilhismo_exercicio8">Figura 18</a>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="cpp">  <span class="c1">//para tirar os espaços entre os circulos </span>
  <span class="c1">//se o pixel for igual a 255, ele recebe a cor da imagem original</span>
  <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="n">height</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">){</span>
    <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">j</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="n">j</span><span class="o">&lt;</span><span class="n">width</span><span class="p">;</span> <span class="n">j</span><span class="o">++</span><span class="p">){</span>
      <span class="k">if</span><span class="p">(</span><span class="n">points</span><span class="p">.</span><span class="n">at</span><span class="o">&lt;</span><span class="n">uchar</span><span class="o">&gt;</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">)</span> <span class="o">==</span> <span class="mi">255</span><span class="p">){</span>
        <span class="n">points</span><span class="p">.</span><span class="n">at</span><span class="o">&lt;</span><span class="n">uchar</span><span class="o">&gt;</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">)</span> <span class="o">=</span> <span class="n">image</span><span class="p">.</span><span class="n">at</span><span class="o">&lt;</span><span class="n">uchar</span><span class="o">&gt;</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span></code></pre>
</div>
</div>
<div id="Pontilhismo_exercicio8" class="imageblock">
<div class="content">
<img src="exercicio8/Pontilhismo.jpg" alt="Pontilhismo">
</div>
<div class="title">Figure 18. Pontilhismo sem Canny</div>
</div>
<div class="paragraph">
<p>Em seguida foi executada a função <code>on_trackbar_canny(int, void*)</code> que é ativada ao mover a trackbar do programa, quanto maior o valor dessa trackbar
menor é a quantidade de bordas detectada pelo algoritmo de Canny. Essa função aplica o algoritmo de Canny (<a href="index.html#bordaCanny_exercicio8">Figura 19</a>)
e posteriormente adiciona o efeito de pontilhismo na borda detectada (<a href="index.html#bordaPontilhismo_exercicio8">Figura 20</a>).
O raio dos círculos nas bordas são menores que os da imagem completa. Por último, as bordas pontilhadas são adicionadas a imagem pontilhada completa e
o resultado pode ser visto na <a href="index.html#PontilhismoCanny_exercicio8">Figura 21</a>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="cpp"><span class="kt">void</span> <span class="nf">on_trackbar_canny</span><span class="p">(</span><span class="kt">int</span><span class="p">,</span> <span class="kt">void</span><span class="o">*</span><span class="p">){</span>
  <span class="n">Canny</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="n">border</span><span class="p">,</span> <span class="n">top_slider</span><span class="p">,</span> <span class="mi">3</span><span class="o">*</span><span class="n">top_slider</span><span class="p">);</span>
  <span class="n">imwrite</span><span class="p">(</span><span class="s">"bordaCanny.jpg"</span><span class="p">,</span> <span class="n">border</span><span class="p">);</span>

  <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="n">height</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">){</span>
    <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">j</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="n">j</span><span class="o">&lt;</span><span class="n">width</span><span class="p">;</span> <span class="n">j</span><span class="o">++</span><span class="p">){</span>
      <span class="k">if</span><span class="p">(</span><span class="n">border</span><span class="p">.</span><span class="n">at</span><span class="o">&lt;</span><span class="n">uchar</span><span class="o">&gt;</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">250</span><span class="p">){</span>
        <span class="n">x</span> <span class="o">=</span> <span class="n">i</span><span class="o">+</span><span class="n">rand</span><span class="p">()</span><span class="o">%</span><span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">JITTER</span><span class="p">)</span><span class="o">-</span><span class="n">JITTER</span><span class="o">+</span><span class="mi">1</span><span class="p">;</span>
        <span class="n">y</span> <span class="o">=</span> <span class="n">j</span><span class="o">+</span><span class="n">rand</span><span class="p">()</span><span class="o">%</span><span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">JITTER</span><span class="p">)</span><span class="o">-</span><span class="n">JITTER</span><span class="o">+</span><span class="mi">1</span><span class="p">;</span>
        <span class="n">gray</span> <span class="o">=</span> <span class="n">image</span><span class="p">.</span><span class="n">at</span><span class="o">&lt;</span><span class="n">uchar</span><span class="o">&gt;</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">);</span>
        <span class="n">circle</span><span class="p">(</span><span class="n">border</span><span class="p">,</span>
             <span class="n">cv</span><span class="o">::</span><span class="n">Point</span><span class="p">(</span><span class="n">y</span><span class="p">,</span><span class="n">x</span><span class="p">),</span>
             <span class="n">RAIO</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span>
             <span class="n">CV_RGB</span><span class="p">(</span><span class="n">gray</span><span class="p">,</span><span class="n">gray</span><span class="p">,</span><span class="n">gray</span><span class="p">),</span>
             <span class="o">-</span><span class="mi">1</span><span class="p">,</span>
             <span class="n">cv</span><span class="o">::</span><span class="n">LINE_AA</span><span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
  <span class="n">clonePoints</span> <span class="o">=</span> <span class="n">points</span><span class="p">.</span><span class="n">clone</span><span class="p">();</span>
  <span class="c1">//para pixels com valor maior que 50, a matriz clonePoints recebe o valor da matriz borda</span>
  <span class="c1">//ao usar a condicao "maior que 0", a imagem final ficava com muitos pixels escuros</span>
  <span class="c1">//ao redor dos circulos da borda</span>
  <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="n">height</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">){</span>
    <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">j</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="n">j</span><span class="o">&lt;</span><span class="n">width</span><span class="p">;</span> <span class="n">j</span><span class="o">++</span><span class="p">){</span>
      <span class="k">if</span><span class="p">(</span><span class="n">border</span><span class="p">.</span><span class="n">at</span><span class="o">&lt;</span><span class="n">uchar</span><span class="o">&gt;</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">50</span><span class="p">){</span>
        <span class="n">clonePoints</span><span class="p">.</span><span class="n">at</span><span class="o">&lt;</span><span class="n">uchar</span><span class="o">&gt;</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">)</span> <span class="o">=</span> <span class="n">border</span><span class="p">.</span><span class="n">at</span><span class="o">&lt;</span><span class="n">uchar</span><span class="o">&gt;</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
  <span class="n">imshow</span><span class="p">(</span><span class="s">"canny"</span><span class="p">,</span> <span class="n">clonePoints</span><span class="p">);</span>
  <span class="c1">//imshow("canny", border);</span>
<span class="p">}</span></code></pre>
</div>
</div>
<div id="bordaCanny_exercicio8" class="imageblock">
<div class="content">
<img src="exercicio8/bordaCanny.jpg" alt="bordaCanny">
</div>
<div class="title">Figure 19. Bordas pelo algoritmo de Canny</div>
</div>
<div id="bordaPontilhismo_exercicio8" class="imageblock">
<div class="content">
<img src="exercicio8/bordaPontilhismo.jpg" alt="bordaPontilhismo">
</div>
<div class="title">Figure 20. Potilhismo nas bordas</div>
</div>
<div id="PontilhismoCanny_exercicio8" class="imageblock">
<div class="content">
<img src="exercicio8/resultado.jpg" alt="resultado">
</div>
<div class="title">Figure 21. Pontilhismo com Canny.</div>
</div>
<div class="paragraph">
<p>O código completo se encontra em <a href="exercicio8/cannypoints.cpp">cannypoints.cpp</a>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_9_quantização_vetorial_com_k_means">9. Quantização vetorial com k-means</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_9_1_executar_o_programa_do_professor_com_novos_parâmetros">9.1. Executar o programa do professor com novos parâmetros</h3>
<div class="paragraph">
<p>Utilizando o programa disponibilizado pelo professor (<a href="https://agostinhobritojr.github.io/tutorial/pdi/exemplos/kmeans.cpp">kmeans.cpp</a>), o valor de nRodadas
foi alterado para 1 e o valor inicial dos centros passou a ser dado de forma aleatória a partir do
parâmetro <code>KMEANS_RANDOM_CENTERS</code> no lugar do <code>KMEANS_PP_CENTERS</code>. O programa foi executado 10 vezes com a mesma imagem de entrada
(<a href="index.html#cidade_exercicio9">Figura 22</a>) resultando nas 10 imagens presentes no gif da <a href="index.html#cidadegif_exercicio9">Figura 23</a>.</p>
</div>
<div id="cidade_exercicio9" class="imageblock">
<div class="content">
<img src="exercicio9/cidade.jpg" alt="cidade">
</div>
<div class="title">Figure 22. Imagem de entrada.</div>
</div>
<div id="cidadegif_exercicio9" class="imageblock">
<div class="content">
<img src="exercicio9/cidade-kmeans.gif" alt="cidade kmeans">
</div>
<div class="title">Figure 23. Imagens de saída.</div>
</div>
<div class="paragraph">
<p>Não foi possível perceber diferença entre as imagens de saída, no entanto, como o valor dos centros é aleatório inicialmente, as imagens de saída podem
ser diferentes a cada vez que o programa é executado.</p>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2022-07-01 19:37:46 -0300
</div>
</div>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  messageStyle: "none",
  tex2jax: {
    inlineMath: [["\\(", "\\)"]],
    displayMath: [["\\[", "\\]"]],
    ignoreClass: "nostem|nolatexmath"
  },
  asciimath2jax: {
    delimiters: [["\\$", "\\$"]],
    ignoreClass: "nostem|noasciimath"
  },
  TeX: { equationNumbers: { autoNumber: "none" } }
})
MathJax.Hub.Register.StartupHook("AsciiMath Jax Ready", function () {
  MathJax.InputJax.AsciiMath.postfilterHooks.Add(function (data, node) {
    if ((node = data.script.parentNode) && (node = node.parentNode) && node.classList.contains("stemblock")) {
      data.math.root.display = "block"
    }
    return data
  })
})
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/MathJax.js?config=TeX-MML-AM_HTMLorMML"></script>
</body>
</html>